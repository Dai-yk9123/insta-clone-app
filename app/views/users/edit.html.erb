<% provide(:title, "Edit") %>
<h1>Edit profile</h1>
<div class="row">
  <div class="col-md-6 col-md-offset-3">
    <%= form_with(model: @user, local:true) do |form| %>
      <%= render 'shared/error_messages', object: form.object %>

      <div class="form-group">
        <%= form.label :image, user_icon(@user,size: 80) %>
        <%= form.file_field :image %>
        <script type="text/javascript">
          $(function() {
            function readURL(input) {
              if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                  $('#img_prev').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
              }
            }
            $("#user_image").change(function(){
              readURL(this);
            });
          });
        </script>
      </div>
      <div class="form-group">
        <%= form.label :name %>
        <%= form.text_field :name, class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :user_name, "UserID" %>
        <%= form.text_field :user_name, class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :email %>
        <%= form.email_field :email, class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :url, "Website" %>
        <%= form.text_field :url, class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.label :description %>
        <%= form.text_area :description, class: 'form-control' %>
      </div>
      <div class="form-group">
        <%= form.submit "Update profile", class:"btn btn-primary w-100" %>
      </div>
    <% end %>
  <%= link_to "Delete account", @user, method: "delete", class: "btn btn-secondary btn-sm", data: { confirm: "Delete your account, you sure?"} %>
  </div>
</div>
